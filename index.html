<!DOCTYPE html>
<html lang="pt-BR" class="dark-theme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1e1e1e">
    <title>CoffeeGen - Tetsu Kasuya (4:6)</title>

    <!-- Preconnect para Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

   <!-- AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2733184476160559"
     crossorigin="anonymous"></script>

    <!-- Preload recursos cr√≠ticos -->
    <link rel="preload" href="src/css/styles.min.css" as="style">
    <link rel="preload" href="src/js/script.min.js" as="script">
    <link rel="preload" href="assets/icons/favicon.ico" as="image">

    <!-- Pr√©-carregar fonte cr√≠tica para o t√≠tulo -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap"></noscript>

    <!-- Preload imagens cr√≠ticas -->
    <link rel="preload" href="assets/images/webp/balance.webp" as="image">
    <link rel="preload" href="assets/images/webp/lemon.webp" as="image">
    <link rel="preload" href="assets/images/webp/honey.webp" as="image">

    <!-- CSS cr√≠tico inline para melhor LCP -->
    <style>
      /* Reset b√°sico e vari√°veis cr√≠ticas */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-color: #0066ff;
        --text-color: #333333;
        --dark-text-color: #e0e0e0;
        --background: #f5f5f5;
        --dark-background: #121212;
        --card-bg: #ffffff;
        --dark-card-bg: #1e1e1e;
        --mode-transition: background-color 0.5s ease, color 0.5s ease;
      }

      /* Garantir renderiza√ß√£o imediata do conte√∫do cr√≠tico */
      body {
        font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background-color: var(--background);
        color: var(--text-color);
        line-height: 1.5;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        transition: var(--mode-transition);
        font-display: swap;
      }

      body.dark-mode {
        background-color: var(--dark-background);
        color: var(--dark-text-color);
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 12px;
        width: 100%;
        flex: 1;
        display: flex;
        flex-direction: column;
        padding-bottom: 80px;
      }

      header {
        text-align: center;
        margin-bottom: 12px;
        display: block !important;
        visibility: visible !important;
      }

      h1 {
        color: var(--text-color);
        margin-bottom: 6px;
        font-size: clamp(1.4rem, 4vw, 1.8rem);
        font-weight: 700;
        letter-spacing: -0.5px;
        font-family: 'Poppins', sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        text-rendering: optimizeSpeed;
        contain: layout style;
        content-visibility: auto;
      }

      body.dark-mode h1 {
        color: var(--dark-text-color);
      }

      /* √çcone do t√≠tulo com dimens√µes expl√≠citas para evitar CLS */
      .title-icon {
        height: 1.2em;
        width: 1.2em;
        flex-shrink: 0;
        object-fit: contain;
        transition: var(--mode-transition);
      }

      .divider {
        width: 50px;
        height: 3px;
        background-color: var(--primary-color);
        margin: 0 auto;
      }

      body.dark-mode .divider {
        background-color: #ff7b00;
      }

      /* Layout principal cr√≠tico */
      .main-content {
        display: flex;
        flex: 1;
        gap: 12px;
      }

      .left-column, .right-column {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      /* Acessibilidade */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* Remover outline padr√£o do navegador */
      *:focus {
        outline: none;
      }

      /* Focus indicators personalizados para acessibilidade */
      button:focus-visible,
      input:focus-visible,
      .preference-card:focus-visible,
      a:focus-visible {
        outline: none;
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.4);
        border-radius: 4px;
      }

      /* Focus para bot√µes espec√≠ficos */
      .timer-btn:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.5);
        transform: translateY(-1px);
      }

      .method-explanation-btn:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.6);
        transform: scale(1.05);
      }

      .lock-button:focus-visible {
        box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.5);
        border-radius: 4px;
      }

      .kofi-button:focus-visible {
        box-shadow: 0 0 0 3px rgba(255, 94, 91, 0.4);
        transform: translateY(-2px);
      }

      /* Focus para cart√µes de prefer√™ncia */
      .preference-card:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.4), 0 8px 20px rgba(0, 0, 0, 0.15);
        transform: translateY(-3px);
        border-color: var(--primary-color);
      }

      /* Focus para inputs */
      input:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.3);
        border-color: var(--primary-color);
      }

      /* Modo escuro - ajustar cores do focus */
      body.dark-mode button:focus-visible,
      body.dark-mode .preference-card:focus-visible,
      body.dark-mode input:focus-visible,
      body.dark-mode a:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--dark-primary-rgb), 0.4);
      }

      body.dark-mode .method-explanation-btn:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--dark-primary-rgb), 0.6);
      }

      body.dark-mode .timer-btn:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--dark-primary-rgb), 0.5);
      }

      /* Focus para bot√£o de modo escuro/claro */
      .dark-mode-toggle:focus-visible {
        outline: none;
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.5);
        transform: scale(1.1);
      }

      body.dark-mode .dark-mode-toggle:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--dark-primary-rgb), 0.5);
      }

      /* Garantir que elementos interativos tenham cursor pointer */
      button,
      .preference-card,
      .lock-button,
      .dark-mode-toggle,
      .method-explanation-btn,
      .kofi-button {
        cursor: pointer;
      }

      /* Remover outline em todos os estados para elementos espec√≠ficos */
      .timer-btn,
      .preference-card,
      .method-explanation-btn,
      .lock-button,
      .dark-mode-toggle,
      .kofi-button {
        outline: none !important;
        -webkit-tap-highlight-color: transparent;
      }

      /* Melhorar feedback visual no hover para compensar a remo√ß√£o do outline */
      .timer-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .preference-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      }

      .method-explanation-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.3);
      }

      body.dark-mode .method-explanation-btn:hover {
        box-shadow: 0 4px 12px rgba(var(--dark-primary-rgb), 0.3);
      }

      /* Garantir que n√£o h√° outline em nenhum elemento interativo */
      button,
      input,
      select,
      textarea,
      a,
      [tabindex],
      .preference-card,
      .timer-btn,
      .method-explanation-btn,
      .lock-button,
      .dark-mode-toggle,
      .kofi-button {
        outline: none !important;
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      /* Permitir sele√ß√£o de texto em inputs */
      input,
      textarea {
        -webkit-user-select: text;
        -moz-user-select: text;
        -ms-user-select: text;
        user-select: text;
      }

      /* Transi√ß√µes suaves para todos os elementos interativos */
      button,
      .preference-card,
      .method-explanation-btn,
      .lock-button,
      .dark-mode-toggle,
      .kofi-button {
        transition: all 0.2s ease;
      }

      /* Estados ativos (quando clicado) */
      .timer-btn:active {
        transform: translateY(0);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }

      .preference-card:active {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .method-explanation-btn:active {
        transform: scale(0.98);
      }

      .lock-button:active {
        transform: scale(0.95);
      }

      /* Melhorar navega√ß√£o por teclado */
      [tabindex="0"]:focus-visible,
      [role="radio"]:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.5);
        border-radius: 8px;
      }

      /* Indicador especial para elementos selecionados com foco */
      .preference-card.selected:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.6), 0 8px 20px rgba(0, 0, 0, 0.15);
        border-color: var(--primary-color);
      }

      body.dark-mode .preference-card.selected:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--dark-primary-rgb), 0.6), 0 8px 20px rgba(0, 0, 0, 0.15);
        border-color: var(--dark-primary-color);
      }

      /* Garantir que elementos com role tenham comportamento correto */
      [role="button"],
      [role="radio"] {
        outline: none !important;
        cursor: pointer;
      }

      /* Feedback visual para elementos desabilitados */
      button:disabled,
      input:disabled,
      .preference-card.disabled {
        outline: none !important;
        cursor: not-allowed;
        opacity: 0.6;
      }

      /* Remover qualquer outline residual do navegador */
      *::-moz-focus-inner {
        border: 0;
        outline: none;
      }

      /* Webkit espec√≠fico */
      input[type="button"]:focus,
      input[type="submit"]:focus,
      input[type="reset"]:focus,
      button:focus {
        outline: none !important;
        -webkit-appearance: none;
      }

      /* Estilos para links do footer - com especificidade alta */
      footer a,
      footer .footer-content a,
      .footer-content p a {
        color: var(--primary-color) !important;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        border-radius: 3px;
        padding: 2px 4px;
        margin: -2px -4px;
        display: inline-block;
      }

      footer a:hover,
      footer .footer-content a:hover,
      .footer-content p a:hover {
        color: var(--primary-color) !important;
        background-color: rgba(var(--primary-rgb), 0.1);
        text-decoration: underline;
        transform: translateY(-1px);
      }

      footer a:focus-visible,
      footer .footer-content a:focus-visible,
      .footer-content p a:focus-visible {
        outline: none;
        box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.5);
        background-color: rgba(var(--primary-rgb), 0.1);
      }

      footer a:active,
      footer .footer-content a:active,
      .footer-content p a:active {
        transform: translateY(0);
        background-color: rgba(var(--primary-rgb), 0.15);
      }

      /* Modo escuro - cores do footer */
      body.dark-mode footer a,
      body.dark-mode footer .footer-content a,
      body.dark-mode .footer-content p a {
        color: var(--dark-primary-color) !important;
      }

      body.dark-mode footer a:hover,
      body.dark-mode footer .footer-content a:hover,
      body.dark-mode .footer-content p a:hover {
        color: var(--dark-primary-color) !important;
        background-color: rgba(var(--dark-primary-rgb), 0.15);
      }

      body.dark-mode footer a:focus-visible,
      body.dark-mode footer .footer-content a:focus-visible,
      body.dark-mode .footer-content p a:focus-visible {
        box-shadow: 0 0 0 2px rgba(var(--dark-primary-rgb), 0.5);
        background-color: rgba(var(--dark-primary-rgb), 0.15);
      }

      body.dark-mode footer a:active,
      body.dark-mode footer .footer-content a:active,
      body.dark-mode .footer-content p a:active {
        background-color: rgba(var(--dark-primary-rgb), 0.2);
      }

      /* Garantir que o footer tenha contraste adequado */
      footer {
        background-color: var(--background);
        color: var(--text-color);
        transition: var(--mode-transition);
      }

      body.dark-mode footer {
        background-color: var(--dark-background);
        color: var(--dark-text-color);
      }

      /* Responsivo cr√≠tico */
      @media (max-width: 768px) {
        .main-content {
          flex-direction: column;
        }

        h1 {
          font-size: clamp(1.2rem, 5vw, 1.6rem);
          flex-wrap: wrap;
        }
      }

      /* Reduzir movimento para usu√°rios sens√≠veis */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>

    <link rel="stylesheet" href="src/css/styles.min.css">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <link rel="apple-touch-icon" href="assets/icons/favicon.ico">

    <!-- PWA Manifest -->
    <link rel="manifest" href="config/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="CoffeeGen">
    <meta name="msapplication-TileColor" content="#0066ff">
    <meta name="msapplication-config" content="config/browserconfig.xml">

    <!-- Meta Tags SEO -->
    <meta name="description" content="Calculadora gratuita para o m√©todo 4:6 de Tetsu Kasuya. Crie receitas personalizadas de caf√© filtrado com cron√¥metro integrado. Controle acidez, do√ßura e corpo do seu caf√©.">
    <meta name="keywords" content="m√©todo 4:6, Tetsu Kasuya, caf√© filtrado, V60, receita caf√©, calculadora caf√©, brew ratio, coffee brewing, barista, caf√© especial">
    <meta name="author" content="Pedro Gottardi">
    <meta name="robots" content="index, follow">
    <meta name="language" content="pt-BR">
    <meta name="revisit-after" content="7 days">
    <meta name="rating" content="general">

    <!-- Cache Control -->
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <meta http-equiv="Expires" content="Thu, 31 Dec 2025 23:59:59 GMT">


    <!-- DNS Prefetch e Resource Hints -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//www.googletagmanager.com">

    <!-- Prefetch para recursos que podem ser necess√°rios -->
    <link rel="prefetch" href="assets/images/webp/tetsu-kasuya.webp">
    <link rel="prefetch" href="assets/audio/beep.mp3">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://coffeegen.vercel.app/">
    <meta property="og:title" content="CoffeeGen - M√©todo 4:6 Tetsu Kasuya | Calculadora de Caf√©">
    <meta property="og:description" content="Calculadora para o m√©todo 4:6 de Tetsu Kasuya.">
    <meta property="og:image" content="https://coffeegen.vercel.app/assets/images/lemon.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Tetsu Kasuya - Criador do M√©todo 4:6 para caf√© filtrado">
    <meta property="og:site_name" content="CoffeeGen">
    <meta property="og:locale" content="pt_BR">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://coffeegen.vercel.app/">
    <meta property="twitter:title" content="CoffeeGen - M√©todo 4:6 Tetsu Kasuya | Calculadora de Caf√©">
    <meta property="twitter:description" content="Calculadora para o m√©todo 4:6 de Tetsu Kasuya.">
    <meta property="twitter:image" content="https://coffeegen.vercel.app/assets/images/lemon.png">
    <meta property="twitter:image:alt" content="Website Logo - Calculadora para o m√©todo 4:6 de Tetsu Kasuya">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://coffeegen.vercel.app/">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "CoffeeGen - M√©todo 4:6 Tetsu Kasuya",
      "description": "Calculadora gratuita para o m√©todo 4:6 de Tetsu Kasuya. Crie receitas personalizadas de caf√© filtrado com cron√¥metro integrado.",
      "url": "https://coffeegen.vercel.app/",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "BRL"
      },
      "creator": {
        "@type": "Person",
        "name": "Pedro Gottardi"
      },
      "about": {
        "@type": "Thing",
        "name": "M√©todo 4:6",
        "description": "T√©cnica de preparo de caf√© criada por Tetsu Kasuya, campe√£o mundial de Brewers Cup 2016"
      },
      "keywords": "m√©todo 4:6, Tetsu Kasuya, caf√© filtrado, V60, receita caf√©, calculadora caf√©",
      "inLanguage": "pt-BR",
      "isAccessibleForFree": true,
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "1.0",
      "datePublished": "2025-01-01",
      "dateModified": "2025-01-15"
    }
    </script>

    <!-- Google tag (gtag.js) - Carregado de forma otimizada -->
    <script>
      // Carregar Google Analytics de forma otimizada
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-257EXVP1PE', {
        // Otimiza√ß√µes de performance
        send_page_view: false,
        transport_type: 'beacon',
        custom_map: {'custom_parameter': 'value'}
      });

      // Carregar script do GA de forma ass√≠ncrona ap√≥s o load
      window.addEventListener('load', function() {
        const script = document.createElement('script');
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-257EXVP1PE';
        script.async = true;
        document.head.appendChild(script);

        // Enviar page view ap√≥s carregamento
        script.onload = function() {
          gtag('event', 'page_view', {
            page_title: document.title,
            page_location: window.location.href
          });
        };
      }, { once: true });
    </script>

    <!-- JavaScript cr√≠tico inline para melhorar o First Paint -->
    <script>
// JavaScript cr√≠tico otimizado para Core Web Vitals
(function() {
  'use strict';

  // Performance mark para medi√ß√£o
  performance.mark('critical-js-start');

  // Aplicar tema escuro imediatamente para evitar FOUC (Flash of Unstyled Content)
  const prefersDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  const storedDarkMode = localStorage.getItem('darkMode');

  if (storedDarkMode === 'true' || (storedDarkMode === null && prefersDarkMode)) {
    document.documentElement.classList.add('dark-theme');
    // Aplicar classe dark-mode no body se j√° existir
    if (document.body) {
      document.body.classList.add('dark-mode');
    } else {
      // Aguardar body estar dispon√≠vel
      document.addEventListener('DOMContentLoaded', function() {
        document.body.classList.add('dark-mode');
      }, { once: true });
    }
  }

  // Otimizar renderiza√ß√£o do t√≠tulo principal
  function optimizeTitle() {
    const titleEl = document.getElementById('main-title');
    if (titleEl) {
      titleEl.style.visibility = 'visible';
      titleEl.style.opacity = '1';
      titleEl.style.transform = 'translateZ(0)'; // For√ßa acelera√ß√£o de hardware
    }
  }

  // Usar requestIdleCallback se dispon√≠vel, sen√£o setTimeout
  if ('requestIdleCallback' in window) {
    requestIdleCallback(optimizeTitle, { timeout: 100 });
  } else {
    setTimeout(optimizeTitle, 0);
  }

  // Fun√ß√£o para carregar CSS de forma ass√≠ncrona
  function loadCSS(href) {
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = href;
    link.media = 'print';
    document.head.appendChild(link);

    // Mudar para 'all' quando o CSS estiver carregado
    link.onload = function() {
      this.media = 'all';
    };
  }

  // Fun√ß√£o para carregar JavaScript de forma ass√≠ncrona
  function loadScript(src, defer = true, async = false) {
    const script = document.createElement('script');
    script.src = src;
    if (defer) script.defer = true;
    if (async) script.async = true;
    document.body.appendChild(script);
    return script;
  }

  // Fun√ß√£o para carregar fontes de forma otimizada
  function loadFont(fontFamily, weights, display = 'swap') {
    const fontLink = document.createElement('link');
    fontLink.rel = 'stylesheet';
    fontLink.href = `https://fonts.googleapis.com/css2?family=${fontFamily}:wght@${weights.join(';')}&display=${display}`;
    document.head.appendChild(fontLink);
  }

  // Fun√ß√£o otimizada para carregar recursos
  function loadResources() {
    // Performance mark
    performance.mark('resource-loading-start');

    // Carregar CSS principal de forma ass√≠ncrona apenas se n√£o foi pr√©-carregado
    if (!document.querySelector('link[href="src/css/styles.min.css"]')) {
      loadCSS('src/css/styles.min.css');
    }

    // Carregar JavaScript principal de forma adiada apenas se n√£o foi pr√©-carregado
    if (!document.querySelector('script[src="src/js/script.min.js"]')) {
      loadScript('src/js/script.min.js', true, false);
    }

    // Carregar fontes adicionais de forma otimizada com requestIdleCallback
    function loadFonts() {
      loadFont('Poppins', [300, 400, 500, 600], 'swap');
      loadFont('Roboto+Mono', [400, 700], 'swap');
    }

    if ('requestIdleCallback' in window) {
      requestIdleCallback(loadFonts, { timeout: 2000 });
    } else {
      setTimeout(loadFonts, 1000);
    }

    // Precarregar imagens cr√≠ticas com Intersection Observer se dispon√≠vel
    const criticalImages = [
      'assets/images/webp/balance.webp',
      'assets/images/webp/lemon.webp',
      'assets/images/webp/honey.webp'
    ];

    // Precarregar imagens n√£o-cr√≠ticas com delay
    const nonCriticalImages = [
      'assets/images/webp/muscle.webp',
      'assets/images/webp/bone.webp',
      'assets/images/webp/arrows.webp'
    ];

    // Carregar imagens cr√≠ticas imediatamente
    criticalImages.forEach(src => {
      const img = new Image();
      img.src = src;
    });

    // Carregar imagens n√£o-cr√≠ticas com delay
    setTimeout(() => {
      nonCriticalImages.forEach(src => {
        const img = new Image();
        img.src = src;
      });
    }, 1000);

    performance.mark('resource-loading-end');
    performance.measure('resource-loading', 'resource-loading-start', 'resource-loading-end');
  }

  // Verificar se o documento j√° est√° carregado
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    // Se o documento j√° estiver carregado, executar imediatamente
    loadResources();
  } else {
    // Caso contr√°rio, aguardar o carregamento
    window.addEventListener('load', loadResources, { once: true });
  }

  // Performance mark final
  performance.mark('critical-js-end');
  performance.measure('critical-js-execution', 'critical-js-start', 'critical-js-end');
})();
    </script>
</head>
<body class="dark-mode">
    <div class="container">
        <header>
            <h1 id="main-title">
                <img src="assets/icons/favicon.ico" alt="√çcone do CoffeeGen - Calculadora do M√©todo 4:6 de Tetsu Kasuya" class="title-icon" width="32" height="32" loading="eager">
                CoffeeGen - Tetsu Kasuya (4:6)
                <button class="method-explanation-btn" aria-label="Entenda o m√©todo 4:6 de Tetsu Kasuya - Abre explica√ß√£o detalhada">?</button>
            </h1>
            <div class="divider"></div>
        </header>
        <div class="main-content">
            <div class="left-column">
                <div class="coffee-form">
                    <div class="form-group">
                        <div class="input-row">
                            <div class="input-group">
                                <label for="coffee-amount">Caf√© (g):</label>
                                <input type="number" id="coffee-amount" value="15" min="10" max="50"
                                       aria-label="Quantidade de caf√© em gramas"
                                       aria-describedby="coffee-help">
                                <div id="coffee-help" class="sr-only">Digite a quantidade de caf√© entre 10 e 50 gramas</div>
                            </div>
                            <div class="input-group disabled">
                                <label for="water-amount">√Ågua (ml):</label>
                                <div class="input-with-lock">
                                    <input type="number" id="water-amount" value="225" min="150" max="750" disabled
                                           aria-label="Quantidade de √°gua em mililitros"
                                           aria-describedby="water-help">
                                    <button class="lock-button" id="water-lock" title="Desbloquear campo de √°gua"
                                            aria-label="Desbloquear campo de quantidade de √°gua">üîí</button>
                                </div>
                                <div id="water-help" class="sr-only">Campo calculado automaticamente baseado no caf√© e propor√ß√£o</div>
                            </div>
                            <div class="input-group disabled">
                                <label for="ratio">Propor√ß√£o:</label>
                                <div class="input-with-lock">
                                    <input type="number" id="ratio" value="15" min="10" max="20" step="1" disabled
                                           aria-label="Propor√ß√£o caf√© para √°gua"
                                           aria-describedby="ratio-help">
                                    <button class="lock-button" id="ratio-lock" title="Desbloquear campo de propor√ß√£o"
                                            aria-label="Desbloquear campo de propor√ß√£o caf√©-√°gua">üîí</button>
                                </div>
                                <div id="ratio-help" class="sr-only">Propor√ß√£o de 1 grama de caf√© para X gramas de √°gua</div>
                            </div>
                        </div>
                    </div>

                    <div class="preference-section" role="group" aria-labelledby="flavor-heading">
                        <h2 id="flavor-heading">Prefer√™ncia de sabor:</h2>
                        <div class="preference-cards" role="radiogroup" aria-labelledby="flavor-heading">
                            <div class="preference-card" data-flavor="acidic" role="radio" aria-checked="false" tabindex="0"
                                 aria-label="Selecionar prefer√™ncia por mais acidez no caf√©">
                                <div class="icon">
                                    <picture>
                                        <source srcset="assets/images/webp/lemon.webp" type="image/webp">
                                        <img src="assets/images/lemon.png" alt="√çcone de lim√£o representando acidez no caf√© - M√©todo 4:6" width="48" height="48" loading="eager" />
                                    </picture>
                                </div>
                                <h3>Mais Acidez</h3>
                                <p>Primeiro ataque com mais √°gua</p>
                            </div>

                            <div class="preference-card" data-flavor="sweet" role="radio" aria-checked="false" tabindex="0"
                                 aria-label="Selecionar prefer√™ncia por mais do√ßura no caf√©">
                                <div class="icon">
                                    <picture>
                                        <source srcset="assets/images/webp/honey.webp" type="image/webp">
                                        <img src="assets/images/honey.png" alt="√çcone de mel representando do√ßura no caf√© - M√©todo 4:6" width="48" height="48" loading="eager" />
                                    </picture>
                                </div>
                                <h3>Mais Do√ßura</h3>
                                <p>Primeiro ataque com menos √°gua</p>
                            </div>

                            <div class="preference-card" data-flavor="standard" role="radio" aria-checked="true" tabindex="0"
                                 aria-label="Selecionar prefer√™ncia por sabor equilibrado no caf√©" class="selected">
                                <div class="icon">
                                    <picture>
                                        <source srcset="assets/images/webp/balance.webp" type="image/webp">
                                        <img src="assets/images/balance.png" alt="√çcone de balan√ßa representando equil√≠brio no caf√© - M√©todo 4:6" width="48" height="48" loading="eager" />
                                    </picture>
                                </div>
                                <h3>Equilibrado</h3>
                                <p>Ataques iguais para equil√≠brio</p>
                            </div>
                        </div>
                    </div>

                    <div class="preference-section" role="group" aria-labelledby="body-heading">
                        <h2 id="body-heading">Prefer√™ncia de corpo:</h2>
                        <div class="preference-cards" role="radiogroup" aria-labelledby="body-heading">
                            <div class="preference-card" data-body="full" role="radio" aria-checked="false" tabindex="0"
                                 aria-label="Selecionar prefer√™ncia por mais corpo no caf√©">
                                <div class="icon">
                                    <picture>
                                        <source srcset="assets/images/webp/muscle.webp" type="image/webp">
                                        <img src="assets/images/muscle.png" alt="√çcone de m√∫sculo representando mais corpo no caf√© - M√©todo 4:6" width="48" height="48" loading="lazy" />
                                    </picture>
                                </div>
                                <h3>Mais Corpo</h3>
                                <p>4 ataques finais</p>
                            </div>

                            <div class="preference-card" data-body="light" role="radio" aria-checked="false" tabindex="0"
                                 aria-label="Selecionar prefer√™ncia por menos corpo no caf√©">
                                <div class="icon">
                                    <picture>
                                        <source srcset="assets/images/webp/bone.webp" type="image/webp">
                                        <img src="assets/images/bone.png" alt="√çcone de osso representando menos corpo no caf√© - M√©todo 4:6" width="48" height="48" loading="lazy" />
                                    </picture>
                                </div>
                                <h3>Menos Corpo</h3>
                                <p>2 ataques finais</p>
                            </div>

                            <div class="preference-card" data-body="standard" role="radio" aria-checked="true" tabindex="0"
                                 aria-label="Selecionar prefer√™ncia por corpo padr√£o no caf√©" class="selected">
                                <div class="icon">
                                    <picture>
                                        <source srcset="assets/images/webp/arrows.webp" type="image/webp">
                                        <img src="assets/images/arrows.png" alt="√çcone de setas representando corpo padr√£o no caf√© - M√©todo 4:6" width="48" height="48" loading="lazy" />
                                    </picture>
                                </div>
                                <h3>Padr√£o</h3>
                                <p>3 ataques finais</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            
            <div class="right-column">
                <!-- Cron√¥metro movido para a coluna direita -->
                <div class="timer-section" role="region" aria-labelledby="timer-heading">
                    <h2 id="timer-heading">Cron√¥metro</h2>
                    <div class="timer-container">
                        <div class="timer-display" aria-live="polite" aria-label="Tempo decorrido">00:00</div>
                        <div class="timer-controls">
                            <button id="timer-start" class="timer-btn" aria-label="Iniciar cron√¥metro do m√©todo 4:6">Iniciar</button>
                            <button id="timer-reset" class="timer-btn" aria-label="Reiniciar cron√¥metro e receita">Reiniciar</button>
                        </div>
                        <div class="timer-progress">
                            <div class="timer-progress-bar"></div>
                            <div class="timer-timestamps" id="timer-timestamps">
                                <!-- Os timestamps ser√£o gerados dinamicamente via JavaScript -->
                            </div>
                        </div>
                        <div class="timer-step-info">
                            <div class="current-step">Pronto para come√ßar</div>
                            <div class="next-step">Primeiro passo: Pesar o caf√©</div>
                        </div>
                    </div>
                </div>

                <div class="recipe-container" id="recipe-container" role="region" aria-labelledby="recipe-heading">
                    <h3 id="recipe-heading">Passo a passo:</h3>
                    <div class="recipe-details">
                        <div class="recipe-info" aria-label="Informa√ß√µes da receita">
                            <p><strong>Caf√©:</strong> <span id="recipe-coffee" aria-label="Quantidade de caf√©">15g</span></p>
                            <p><strong>√Ågua:</strong> <span id="recipe-water" aria-label="Quantidade de √°gua">225ml</span></p>
                            <p><strong>Propor√ß√£o:</strong> <span id="recipe-ratio" aria-label="Propor√ß√£o caf√©-√°gua">1:15</span></p>
                        </div>

                        <div class="recipe-steps" id="recipe-steps" role="list" aria-label="Passos da receita do m√©todo 4:6">
                            <!-- Os passos da receita ser√£o inseridos aqui via JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Bot√£o Ko-fi -->
                <a href="https://ko-fi.com/pedrogott" target="_blank" rel="noopener" class="kofi-button"
                   aria-label="Apoie o desenvolvedor comprando um caf√© no Ko-fi - abre em nova aba">Compre-me um caf√© ‚òï</a>
            </div>
        </div>
    </div>



    <footer role="contentinfo" aria-label="Informa√ß√µes do site">
                  <!-- AdSense Bloco -->
             <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2733184476160559"
     crossorigin="anonymous"></script>
<!-- coffeegen -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2733184476160559"
     data-ad-slot="9316490926"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <div class="footer-content">
            <p>&copy; 2025 CoffeeGen. Todos os direitos reservados.</p>
            <p>Desenvolvido por <a href="https://ko-fi.com/pedrogott" target="_blank" rel="noopener" aria-label="Perfil do desenvolvedor Pedro Gottardi no Ko-fi">Pedro Gottardi</a></p>
        </div>
    </footer>

    <script src="src/js/script.min.js" defer></script>
    <script>
      // Adicionar script para ajustar a visualiza√ß√£o em dispositivos m√≥veis
      document.addEventListener('DOMContentLoaded', function() {
        // Verificar se √© um dispositivo m√≥vel
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        if (isMobile) {
          // Ajustar os cart√µes de prefer√™ncia para dispositivos m√≥veis
          const preferenceCards = document.querySelectorAll('.preference-card');

          preferenceCards.forEach(card => {
            // Armazenar o texto original como atributo de dados
            const descText = card.querySelector('p').textContent;
            card.setAttribute('data-description', descText);
          });
        }

        // Verificar prefer√™ncia de modo escuro do sistema
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          // O usu√°rio prefere o modo escuro no sistema e ainda n√£o definiu uma prefer√™ncia
          if (localStorage.getItem('darkMode') === null) {
            localStorage.setItem('darkMode', 'true');
          }
        }

        // Registrar Service Worker para cache
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js')
              .then(registration => {})
              .catch(error => {});
          });
        }

        // Otimiza√ß√£o de imagens com Intersection Observer
        if ('IntersectionObserver' in window) {
          const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = entry.target;
                if (img.dataset.src) {
                  img.src = img.dataset.src;
                  img.removeAttribute('data-src');
                  observer.unobserve(img);
                }
              }
            });
          }, {
            rootMargin: '50px 0px',
            threshold: 0.01
          });

          // Observar imagens com lazy loading
          document.querySelectorAll('img[loading="lazy"]').forEach(img => {
            imageObserver.observe(img);
          });
        }

        // Otimiza√ß√£o de performance com requestIdleCallback
        if ('requestIdleCallback' in window) {
          requestIdleCallback(() => {
            // Precarregar recursos n√£o cr√≠ticos
            const nonCriticalResources = [
              'assets/images/webp/tetsu-kasuya.webp',
              'assets/audio/beep.mp3'
            ];

            nonCriticalResources.forEach(src => {
              const link = document.createElement('link');
              link.rel = 'prefetch';
              link.href = src;
              document.head.appendChild(link);
            });
          }, { timeout: 5000 });
        }
      });
    </script>
</body>
</html>
